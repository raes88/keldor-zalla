<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vue</title>
</head>
<body>
<form id="formulario">
    <textarea name="mensaje" id="mensaje" cols="30" rows="10"></textarea>
    <br>
    <input type="submit" value="Enviar mensaje">
</form>

<script src="https://www.gstatic.com/firebasejs/4.1.5/firebase.js"></script>
<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyBbicItcm46rhJKSeOXvDNdU4mFF7_kRkw",
        authDomain: "curso-vue-firebase.firebaseapp.com",
        databaseURL: "https://curso-vue-firebase.firebaseio.com",
        projectId: "curso-vue-firebase",
        storageBucket: "curso-vue-firebase.appspot.com",
        messagingSenderId: "620168406459"
    };
    firebase.initializeApp(config);

    // Guardar una referencia a la base de datos
    var db = firebase.database();

    // Guardar info de perfil
/*    db.ref('/perfiles/juanwmedia').set({
        username: 'juanwmedia',
        password: '777',
        ciudad: 'Valencia',
        pais: 'España'
    }).then(() => console.info('Datos añadidos'));*/

    // Guardar nuevos datos anidados (lista)
    document.getElementById('formulario').onsubmit= function(event) {
        event.preventDefault();
        let mensaje = document.getElementById('mensaje');
        db.ref('chats').push({
            username: 'juanwmedia',
            mensaje: mensaje.value,
        }).then(() => {
            console.info('Mensaje enviado');
            mensaje.value = '';
        });
    }
</script>
</body>
</html>